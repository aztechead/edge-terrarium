# =============================================================================
# AUTO-GENERATED FILE - DO NOT EDIT MANUALLY
# =============================================================================
# This file is automatically generated by the Terrarium CLI from templates.
# Any manual changes will be overwritten on the next deployment.
# 
# To modify the configuration, edit the app-config.yml files in the apps/ directory
# or update the templates in terrarium_cli/templates/
# =============================================================================

# =============================================================================
# KUBERNETES DATABASE CONFIGMAP MANIFEST
# =============================================================================
# This template generates a Kubernetes ConfigMap for database initialization scripts.
# It contains SQL scripts that will be executed when the database starts.
#
# Template Variables:
#   {{ app.name }} - The name of the application
#   {{ db_config.name }} - The name of the database
#   {{ global_config.namespace }} - Kubernetes namespace
#   {{ init_scripts }} - Dictionary of script names to script contents
#
# Generated Resources:
#   - ConfigMap: {{ app.name }}-{{ db_config.name | replace('_', '-') }}-db-init-scripts
#   - Data: SQL script files for database initialization
# =============================================================================

apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ app.name }}-db-init-scripts
  namespace: {{ global_config.namespace }}
  labels:
    app: {{ app.name }}-db
    component: database
    service: {{ app.name }}
data:
{% for script_name, script_content in init_scripts.items() %}
  {{ script_name }}: |
{{ script_content | indent(4, True) }}
{% endfor %}
