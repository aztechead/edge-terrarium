# =============================================================================
# AUTO-GENERATED FILE - DO NOT EDIT MANUALLY
# =============================================================================
# This file is automatically generated by the Terrarium CLI from templates.
# Any manual changes will be overwritten on the next deployment.
# 
# To modify the configuration, edit the app-config.yml files in the apps/ directory
# or update the templates in terrarium_cli/templates/
# =============================================================================

# =============================================================================
# KUBERNETES DATABASE PVC MANIFEST
# =============================================================================
# This template generates a Kubernetes PersistentVolumeClaim for a PostgreSQL database.
# It provides persistent storage for the database data.
#
# Template Variables:
#   {{ app.name }} - The name of the application
#   {{ db_config.name }} - The name of the database
#   {{ global_config.namespace }} - Kubernetes namespace
#
# Generated Resources:
#   - PVC: {{ app.name }}-{{ db_config.name }}-db-pvc
#   - Storage: 10Gi (configurable)
#   - Access Mode: ReadWriteOnce
# =============================================================================

apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: {{ app.name }}-db-pvc
  namespace: {{ global_config.namespace }}
  labels:
    app: {{ app.name }}-db
    component: database
    service: {{ app.name }}
spec:
  # =============================================================================
  # ACCESS MODES
  # =============================================================================
  # ReadWriteOnce: Volume can be mounted as read-write by a single node
  # This is appropriate for databases that need exclusive access
  accessModes:
  - ReadWriteOnce
  
  # =============================================================================
  # STORAGE CLASS
  # =============================================================================
  # Use default storage class for the cluster
  # Can be overridden by setting storageClassName in the template
  storageClassName: "local-path"
  
  # =============================================================================
  # RESOURCE REQUIREMENTS
  # =============================================================================
  resources:
    requests:
      # Default to 10Gi, can be made configurable
      storage: 10Gi
  
  # =============================================================================
  # VOLUME MODE
  # =============================================================================
  # Filesystem mode for the volume
  volumeMode: Filesystem
  
  # =============================================================================
  # DATA SOURCE
  # =============================================================================
  # Uncomment to restore from a snapshot
  # dataSource:
  #   name: {{ app.name }}-{{ db_config.name }}-db-snapshot
  #   kind: VolumeSnapshot
  #   apiGroup: snapshot.storage.k8s.io
